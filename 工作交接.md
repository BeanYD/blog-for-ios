

## 一、 登录模块

登录页面统一父类`GTLoginBaseViewController`，重写`- (void)touchesBegan:(NSSet<UITouch *> *)touches withEvent:(UIEvent *)event`方法，用于点击收起键盘

`GTLoginAccountViewController`

未登录情况下显示的首页

`GTForgetViewController`

忘记密码页面，由登录页面`GTLoginAccountViewController`进入

`GTModifyPasswordViewController`

修改密码页面，由登录页面`GTLoginAccountViewController`进入

`GTFirstModifyPassWdViewController`

重置密码页面，用户首次登录后进入



## 二、 机票业务

### 机票预订基础页面

相关业务逻辑的控制器：`GTAirTicketChoosePathViewController`

#### UI布局实现

基于UIScrollView进行布局，分上下两部分，上半部分由场景选择，单程、往返、多程模块组成，下半部分为公出单列表。

页面布局主要使用`Masonry`和`frame`。首次布局使用`Masonry`，页面布局更新使用`frame`。

单程、往返UI封装在`GTAirTicketChoosePathView`类中，视图内部按钮事件通过`block`进行回调处理`controller`中的逻辑。

多程UI封装在`GTAirTicketMultiChoosePathView`类中，按钮事件的逻辑处理同单程、往返。

公出单列表UI封装在`GTAirTicketOfficeApplyView`类中，选择列表中某一公出单后逻辑处理在`GTAirTicketChoosePathViewController`中。

#### 代订模式

代订模式的判断如下：

```objective-c
[GTUserCenter sharedInstance].modeType == GTIdentifyModeTypeAgency
```

可通过上述判断区分代订模式和非代订模式

#### 持久化相关的说明

数据持久化使用`plist`，封装在`GTChoosePathDataCache`类中。该类未使用单例的方式创建。在控制器中使用，可通过懒加载的方式创建使用。目前只在`GTAirTicketChoosePathViewController`类中进行是用。

表中分三类数据：showData，common，multipass。

```objective-c
{
    "Root": {
        "showData": {
            
		},
        "common": {
           
        },
        "multipass": {
		
        },
    }
}
```

showData：选择单程和往返相关数据后进行保存，保存和读取的数据模型`GTAirTicketChoosePathModel`,保存数据键值对样式：

```objective-c
{
    "showData": {
        "backDateTime": 1,600,012,800,
        "cabinName": "全部舱位",
        "dateTime": 1,600,012,800,
        "fromCode": "HGH",
        "fromString": "杭州",
        // limit开头的字段主要针对公出单限制的时间，用于后续选择日期做限制
        "limitEndDate": 0,
        "limitStartDate": 0,
        "snString": "",
        "toCode": "BJS",
        "toString": "北京",
        "tripId": 0,
    }
}
```

common：单程和往返的历史数据保存，保存和读取的数据模型`GTAirTicketChoosePathModel`，保存的键值对样式如下，最多只允许3条搜索历史记录。

```objective-c
{
	"common": {
		"history": [
			{
				"fromCity": "xxx",
				"toCity": "xxx",
				"fromCode": "xxx",
				"toCode": "xxx",
                "snString": "xxx"
			},
			{
				...
			},
			{
				...
			}
		]
		
	}
}
```

multipass：多程数据的保存和读取，与单程往返不同的是，没有多条历史数据。保存键值对样式：

```objective-c
{
    "multipass": {
        "history": [
            {
                "departTime": 1,600,099,200,
                "fromCity": "杭州",
                "fromCode": "HGH",
                "snString": "第一程",
                "toCity": "贵阳",
                "toCode": "KWE",
			},
            ...
        ]
    }
}
```



### 机票列表选择页面

相关业务逻辑的控制器：`GTAirTicketBookingListViewController`，`GTAirTicketRecommendViewController`

#### UI布局实现

`GTAirTicketBookingListViewController`，继承自统一封装的`GTBaseTableViewController`，详细关于`tableview`的封装可查看相关的类。

主要UI模块：

顶部的已选择机票列表——`selectedTableView`

日期相关UI——`dateSelectView`

机票-舱位列表UI——`tableView`（由`GTBaseTableViewController`继承而来，直接使用），每种机票有多个舱等的价格可选，分组方式：每组的第一个`cell`作为组头（即`section：n， row：0`），具有收起/展开功能。具体逻辑可查看`tableView`的相关协议方法：

```objective-c
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
```

底部

## 三、 酒店业务

## 四、 行程模块

## 五、 消息模块

## 六、 其他

